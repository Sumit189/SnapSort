<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SnapSort - AI Image Organizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body>
    <div class="app">
      <header class="app__header">
        <div class="title">
          <img src="./assets/logo.png" alt="Logo" class="logo">
          <h1>SnapSort</h1>
        </div>
        <p class="subtitle">Analyze and organize your images into categories with AI.</p>
      </header>

      <div class="layout">
        <aside class="sidebar card">
          <div class="controls__grid">
            <div class="field">
              <label for="apiKey">Gemini API Key</label>
              <div class="password">
                <input id="apiKey" type="password" placeholder="AI Studio API key" autocomplete="off">
                <button id="toggleKey" type="button" class="btn btn--ghost" aria-label="Show or hide API key">üëÅÔ∏è</button>
              </div>
              <div class="hint">Key is stored locally in your browser only. <a href="https://aistudio.google.com/app/api-keys" target="_blank" class="api-link">Get API key</a></div>
            </div>

            <div class="field">
              <label for="model">Model</label>
              <select id="model">
                <option value="gemini-2.5-flash">gemini-2.5-flash</option>
                <option value="gemini-2.5-flash-lite">gemini-2.5-flash-lite</option>
              </select>
            </div>

            <div class="field">
              <label for="concurrency">Concurrency</label>
              <input id="concurrency" type="range" min="1" max="5" step="1" value="3">
              <div class="range-value"><span id="concurrencyValue">3</span> parallel</div>
            </div>

            <div class="field field--categories">
              <label for="categories">Categories <span class="muted">(one per line)</span></label>
              <div class="toggle-switch" id="categoryToggle">
                <input type="radio" name="categoryMode" id="modeManual" checked>
                <label for="modeManual" class="toggle-option">Manual</label>
                <input type="radio" name="categoryMode" id="modeAuto">
                <label for="modeAuto" class="toggle-option">Auto</label>
                <div class="toggle-slider"></div>
              </div>
              <textarea id="categories" rows="10">people
nature
architecture
food
animals
documents
screenshots
art
objects
other</textarea>
              <div class="hint" id="autoHint" hidden>Gemini will determine categories automatically based on image content.</div>
            </div>
          </div>

          <div class="actions">
            <button id="pickFolder" class="btn">Select Folder</button>
            <button id="start" class="btn btn--primary" hidden>Start Analyzing</button>
            <button id="stop" class="btn btn--danger" hidden>Stop</button>
          </div>

          <div class="note" id="compatNote" hidden>
            Your browser may not support folder access. Please use the latest Chrome or Edge.
          </div>
        </aside>

        <main class="main">
          <section class="status card">
            <div class="summary">
              <div>
                <span class="muted">Selected:</span>
                <span id="folderPath" class="mono">‚Äî</span>
              </div>
              <div>
                <span class="muted">Images:</span> <span id="imageCount">0</span>
              </div>
            </div>

            <div class="progress">
              <div class="progress__bar" id="progressBar" style="width: 0%"></div>
              <div class="progress__text"><span id="progressText">0 / 0</span></div>
            </div>

            <div class="summary-cats" id="summaryCats"></div>
          </section>

          <section class="apply card" id="applySection" hidden>
            <h3>Operation</h3>
            <div class="apply__controls">
              <select id="applyAction" class="apply-select">
                <option value="copy">Copy to category folders</option>
                <option value="move">Move to category folders</option>
              </select>
              <button id="applyBtn" class="btn btn--primary">Apply</button>
            </div>
          </section>

          <section class="gallery card">
            <div class="gallery__header">
              <h2>Preview</h2>
              <div class="muted" id="galleryHint">Ready</div>
            </div>
            <div id="grid" class="grid"></div>
          </section>

          <footer class="app__footer">
            <div>
              Built for local use ‚Äî nothing is uploaded except to Gemini for analysis.
            </div>
            <div class="muted">Use responsibly. Large folders may take time.</div>
          </footer>
        </main>
      </div>
    </div>

    <script src="./app.js" defer></script>
  </body>
  </html>



